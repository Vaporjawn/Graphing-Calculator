!function(t){var e={};function s(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){const{render:r,Component:n,Styled:o,StyledComponent:i,List:c,ListOf:l,Record:a,Store:d,StoreOf:u,Router:h}=s(1),{jdom:f,css:m}=s(2);t.exports={render:r,Component:n,Styled:o,StyledComponent:i,List:c,ListOf:l,Record:a,Store:d,StoreOf:u,Router:h,jdom:f,css:m}},function(t,e,s){let r=0;const n=t=>null!==t&&"object"==typeof t,o=t=>{void 0===t.attrs&&(t.attrs={}),void 0===t.events&&(t.events={}),void 0===t.children&&(t.children=[])},i=t=>Array.isArray(t)?t:[t],c=()=>document.createComment("");let l=[];const a=0,d=1,u=2,h={replaceChild:()=>{}};const f=(t,e,s)=>{for(const r of Object.keys(t)){const n=i(t[r]),o=i(e[r]||[]);for(const t of n)o.includes(t)||"function"!=typeof t||s(r,t)}},m=(t,e,s)=>{const i=e=>{t&&t!==e&&l.push([u,t,e]),t=e};if(r++,e!==s)if(null===s)i(c());else if("string"==typeof s||"number"==typeof s)"string"==typeof e||"number"==typeof e?t.nodeValue=s:i(document.createTextNode(s));else if(void 0!==s.appendChild)i(s);else{(void 0===t||!n(e)||e&&void 0!==e.appendChild||e.tag!==s.tag)&&(e={tag:null},i(document.createElement(s.tag))),o(e),o(s);for(const r of Object.keys(s.attrs))if("class"===r){const e=s.attrs.class;Array.isArray(e)?t.className=e.join(" "):t.className=e}else if("style"===r){const r=e.attrs.style||{},n=s.attrs.style;for(const e of Object.keys(n))n[e]!==r[e]&&(t.style[e]=n[e]);for(const e of Object.keys(r))void 0===n[e]&&(t.style[e]="")}else r in t?e.attrs[r]!==s.attrs[r]&&(t[r]=s.attrs[r]):s.attrs[r]!==e.attrs[r]&&t.setAttribute(r,s.attrs[r]);for(const r of Object.keys(e.attrs))void 0===s.attrs[r]&&(r in t?t[r]=null:t.removeAttribute(r));f(s.events,e.events,(e,s)=>{t.addEventListener(e,s)}),f(e.events,s.events,(e,s)=>{t.removeEventListener(e,s)});const r=e.children,c=s.children,u=r.length,h=c.length;if(h+u>0){const n=e._nodes||[],o=u<h?u:h;let i=0;for(;i<o;i++)r[i]!==c[i]&&(n[i]=m(n[i],r[i],c[i]));if(u<h)for(;i<h;i++){const e=m(void 0,void 0,c[i]);l.push([a,t,e]),n.push(e)}else{for(;i<u;i++)l.push([d,t,n[i]]);n.splice(h,u-h)}s._nodes=n}}return 0==--r&&function(){const t=l.length;for(let e=0;e<t;e++){const t=l[e],s=t[0];if(s===d)t[1].removeChild(t[2]);else if(s===u){const e=t[1],s=c(),r=e.parentNode;null!==r?(r.replaceChild(s,e),t[1]=s,t[3]=r):t[3]=h}}for(let e=0;e<t;e++){const t=l[e],s=t[0];s===a?t[1].appendChild(t[2]):s===u&&t[3].replaceChild(t[2],t[1])}l=[]}(),t},p=()=>({source:null,handler:()=>{}});class b{constructor(...t){this.jdom=void 0,this.node=void 0,this.event=p(),this.init(...t),void 0===this.node&&this.render()}static from(t){return class extends b{init(...t){this.args=t}compose(){return t(...this.args)}}}init(){}get record(){return this.event.source}bind(t,e){if(this.unbind(),!(t instanceof S))throw new Error(`cannot bind to ${t}, which is not an instance of Evented.`);this.event={source:t,handler:e},t.addHandler(e)}unbind(){this.record&&this.record.removeHandler(this.event.handler),this.event=p()}remove(){this.unbind()}compose(){return null}preprocess(t){return t}render(t){t=t||this.record&&this.record.summarize();const e=this.preprocess(this.compose(t),t);if(void 0===e)throw new Error(this.constructor.name+".compose() returned undefined.");try{this.node=m(this.node,this.jdom,e)}catch(t){console.error("rendering error.",t)}return this.jdom=e}}const v=new Set;let g;const y=new WeakMap,x=(t,e)=>t+"{"+e+"}",j=(t,e)=>{let s=[],r="";for(const n of Object.keys(e)){const o=e[n];if("@"===n[0])n.startsWith("@media")?s.push(x(n,j(t,o).join(""))):s.push(x(n,j("",o).join("")));else if("object"==typeof o){const e=n.split(",");for(const r of e)if(r.includes("&")){const e=r.replace(/&/g,t);s=s.concat(j(e,o))}else s=s.concat(j(t+" "+r,o))}else r+=n+":"+o+";"}return r&&s.unshift(x(t,r)),s},w=t=>{const e=(t=>{if(!y.has(t)){const e=JSON.stringify(t);let s=e.length,r=1989;for(;s;)r=13*r^e.charCodeAt(--s);y.set(t,"_torus"+(r>>>0))}return y.get(t)})(t);let s=0;if(!v.has(e)){g||(()=>{const t=document.createElement("style");t.setAttribute("data-torus",""),document.head.appendChild(t),g=t.sheet})();const r=j("."+e,t);for(const t of r)g.insertRule(t,s++);v.add(e)}return e},O=t=>(class extends t{styles(){return{}}preprocess(t,e){return n(t)&&(t.attrs=t.attrs||{},t.attrs.class=i(t.attrs.class||[]),t.attrs.class.push(w(this.styles(e)))),t}});class C extends b{get itemClass(){return b}init(t,...e){this.store=t,this.items=new Map,this.filterFn=null,this.itemData=e,this.bind(this.store,()=>this.itemsChanged())}itemsChanged(){const t=this.store.summarize(),e=this.items;for(const s of e.keys())t.includes(s)||(e.get(s).remove(),e.delete(s));for(const s of t)e.has(s)||e.set(s,new this.itemClass(s,()=>this.store.remove(s),...this.itemData));let s=[...e.entries()];null!==this.filterFn&&(s=s.filter(t=>this.filterFn(t[0]))),s.sort((e,s)=>t.indexOf(e[0])-t.indexOf(s[0])),this.items=new Map(s),this.render()}filter(t){this.filterFn=t,this.itemsChanged()}unfilter(){this.filterFn=null,this.itemsChanged()}get components(){return[...this]}get nodes(){return this.components.map(t=>t.node)}[Symbol.iterator](){return this.items.values()}remove(){super.remove();for(const t of this.items.values())t.remove()}compose(){return{tag:"ul",children:this.nodes}}}class S{constructor(){this.handlers=new Set}summarize(){}emitEvent(){const t=this.summarize();for(const e of this.handlers)e(t)}addHandler(t){this.handlers.add(t),t(this.summarize())}removeHandler(t){this.handlers.delete(t)}}class k extends S{constructor(t,e={}){super(),n(t)&&(e=t,t=null),this.id=t,this.data=e}update(t){Object.assign(this.data,t),this.emitEvent()}get(t){return this.data[t]}summarize(){return Object.assign({id:this.id},this.data)}serialize(){return this.summarize()}}class _ extends S{constructor(t=[]){super(),this.reset(t)}get recordClass(){return k}get comparator(){return null}create(t,e){return this.add(new this.recordClass(t,e))}add(t){return this.records.add(t),this.emitEvent(),t}remove(t){return this.records.delete(t),this.emitEvent(),t}[Symbol.iterator](){return this.records.values()}find(t){for(const e of this.records)if(e.id===t)return e;return null}reset(t){this.records=new Set(t),this.emitEvent()}summarize(){return[...this.records].map(t=>[this.comparator?this.comparator(t):null,t]).sort((t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0).map(t=>t[1])}serialize(){return this.summarize().map(t=>t.serialize())}}const E=t=>{let e;const s=[];for(;null!==e;)if(e=/:\w+/.exec(t)){const r=e[0];s.push(r.substr(1)),t=t.replace(r,"(.+)")}return[new RegExp(t),s]};const A={render:m,Component:b,Styled:O,StyledComponent:O(b),List:C,ListOf:t=>(class extends C{get itemClass(){return t}}),Record:k,Store:_,StoreOf:t=>(class extends _{get recordClass(){return t}}),Router:class extends S{constructor(t){super(),this.routes=Object.entries(t).map(([t,e])=>[t,...E(e)]),this.lastMatch=["",null],this._cb=(()=>this.route(location.pathname)),window.addEventListener("popstate",this._cb),this._cb()}summarize(){return this.lastMatch}go(t,{replace:e=!1}={}){window.location.pathname!==t&&(e?history.replaceState(null,document.title,t):history.pushState(null,document.title,t),this.route(t))}route(t){for(const[e,s,r]of this.routes){const n=s.exec(t);if(null!==n){const t={},s=n.slice(1);r.forEach((e,r)=>t[e]=s[r]),this.lastMatch=[e,t];break}}this.emitEvent()}remove(){window.removeEventListener("popstate",this._cb)}}};"object"==typeof window&&(window.Torus=A),t.exports&&(t.exports=A)},function(t,e,s){const r=t=>null!==t&&"object"==typeof t,n=(t,e)=>t.substr(0,t.length-e.length),o=t=>String.fromCodePoint(+/&#(\w+);/.exec(t)[1]),i=(t,e)=>{let s=t[0];for(let r=1,n=e.length;r<=n;r++)s+=e[r-1]+t[r];return s};class c{constructor(t){this.idx=0,this.content=t,this.len=t.length}next(){const t=this.content[this.idx++];return void 0===t&&(this.idx=this.len),t}back(){this.idx--}readUpto(t){const e=this.content.substr(this.idx).indexOf(t);return this.toNext(e)}readUntil(t){const e=this.content.substr(this.idx).indexOf(t)+t.length;return this.toNext(e)}toNext(t){const e=this.content.substr(this.idx);if(-1===t)return this.idx=this.len,e;{const s=e.substr(0,t);return this.idx+=t,s}}clipEnd(t){return!!this.content.endsWith(t)&&(this.content=n(this.content,t),!0)}}const l=t=>{let e="";for(let s=0,r=t.length;s<r;s++)e+="-"===t[s]?t[++s].toUpperCase():t[s];return e},a=t=>{if("!"===(t=t.trim())[0])return{jdom:null,selfClosing:!0};if(!t.includes(" ")){const e=t.endsWith("/");return{jdom:{tag:e?n(t,"/"):t,attrs:{},events:{}},selfClosing:e}}const e=new c(t),s=e.clipEnd("/");let r="",o=!1,i=!1;const a=[];let d=0;const u=t=>{(""!==(r=r.trim())||t)&&(a.push({type:d,value:r}),o=!1,r="")};for(let t=e.next();void 0!==t;t=e.next())switch(t){case"=":i?r+=t:(u(),o=!0,d=1);break;case" ":i?r+=t:o||(u(),d=0);break;case"\\":i&&(t=e.next(),r+=t);break;case'"':i?(i=!1,u(!0),d=0):1===d&&(i=!0);break;default:r+=t,o=!1}u();let h="";const f={},m={};h=a.shift().value;let p=null,b=a.shift();const v=()=>{p=b,b=a.shift()};for(;void 0!==b;){if(1===b.type){const t=p.value;let e=b.value.trim();if(t.startsWith("on"))m[t.substr(2)]=[e];else if("class"===t)""!==e&&(f[t]=e.split(" "));else if("style"===t){e.endsWith(";")&&(e=e.substr(0,e.length-1));const s={};for(const t of e.split(";")){const e=t.indexOf(":"),r=t.substr(0,e),n=t.substr(e+1);s[l(r.trim())]=n.trim()}f[t]=s}else f[t]=e;v()}else p&&(f[p.value]=!0);v()}return p&&0===p.type&&(f[p.value]=!0),{jdom:{tag:h,attrs:f,events:m},selfClosing:s}},d=t=>{const e=[];let s=null,r=!1;const n=()=>{r&&""===s.trim()||s&&e.push(s),s=null,r=!1},i=t=>{!1===r&&(n(),r=!0,s=""),s+=t};for(let e=t.next();void 0!==e;e=t.next())if("<"===e){if(n(),"/"===t.next()){t.readUntil(">");break}{t.back();const e=a(t.readUpto(">"));t.next(),s=e&&e.jdom,e.selfClosing||null===s||(s.children=d(t))}}else i("&"===e?o(e+t.readUntil(";")):e);return n(),e},u=new Map,h=/jdom_tpl_obj_\[(\d+)\]/,f=(t,e)=>{if((t=>"string"==typeof t&&t.includes("jdom_tpl_"))(t)){const s=h.exec(t),r=t.split(s[0]),n=s[1],o=f(r[1],e);let i=[];return""!==r[0]&&i.push(r[0]),Array.isArray(e[n])?i=i.concat(e[n]):i.push(e[n]),0!==o.length&&(i=i.concat(o)),i}return""!==t?[t]:[]},m=(t,e)=>{const s=[];for(const n of t)for(const t of f(n,e))r(t)&&v(t,e),s.push(t);const n=s[0],o=s[s.length-1];return"string"==typeof n&&""===n.trim()&&s.shift(),"string"==typeof o&&""===o.trim()&&s.pop(),s},p=(t,e)=>{if(t.length<14)return t;{const s=h.exec(t);if(null===s)return t;if(t.trim()===s[0])return e[s[1]];{const r=t.split(s[0]);return r[0]+e[s[1]]+p(r[1],e)}}},b=(t,e)=>{for(let s=0,r=t.length;s<r;s++){const r=t[s];"string"==typeof r?t[s]=p(r,e):Array.isArray(r)?b(r,e):v(r,e)}},v=(t,e)=>{for(const s of Object.keys(t)){const n=t[s];"string"==typeof n?t[s]=p(n,e):Array.isArray(n)?"children"===s?t.children=m(n,e):b(n,e):r(n)&&v(n,e)}},g=t=>{const e={};let s=0,r=["",""];const n=()=>{"string"==typeof r[1]?e[r[0].trim()]=r[1].trim():e[r[0].trim()]=r[1],r=["",""]};t.readUntil("{");for(let e=t.next();void 0!==e&&"}"!==e;e=t.next()){const o=r[0];switch(e){case'"':case"'":for(r[s]+=e+t.readUntil(e);r[s].endsWith("\\"+e);)r[s]+=t.readUntil(e);break;case":":""===o.trim()||o.includes("&")||o.includes("@")||o.includes(":")?r[s]+=e:s=1;break;case";":s=0,n();break;case"{":t.back(),r[1]=g(t),n();break;default:r[s]+=e}}return""!==r[0].trim()&&n(),e},y=new Map,x={jdom:(t,...e)=>{const s=t.join("jdom_tpl_joiner");try{if(!u.has(s)){const r=e.map((t,e)=>`jdom_tpl_obj_[${e}]`),n=new c(i(t.map(t=>t.replace(/\s+/g," ")),r)),o=d(n)[0],l=typeof o,a=JSON.stringify(o);u.set(s,t=>{if("string"===l)return p(o,t);if("object"===l){const e={},s=JSON.parse(a);return v(Object.assign(e,s),t),e}return null})}return u.get(s)(e)}catch(s){return console.error(`jdom parse error.\ncheck for mismatched brackets, tags, quotes.\n${i(t,e)}\n${s.stack||s}`),""}},css:(t,...e)=>{const s=i(t,e).trim();return y.has(s)||y.set(s,g(new c("{"+s+"}"))),y.get(s)}};"object"==typeof window&&Object.assign(window,x),t.exports&&(t.exports=x)}]);